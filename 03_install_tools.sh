#!/bin/bash

apt -y install python3-pip firefox file-roller thunar wireshark torbrowser-launcher radare2 python3-msoffcrypto-tool exiftool binutils upx-ucl binwalk torsocks ssdeep gnome-terminal icoutils jq

pip3 install oletools XLMMacroDeobfuscator 

# PE-bear
apt install qt5-default
tmpdir=$(mktemp -d)
cd "${tmpdir}"
wget https://github.com/hasherezade/pe-bear-releases/releases/download/0.5.3.2/PE-bear_0.5.3.2_x64_linux.tar.xz
tar -xf PE-bear_0.5.3.2_x64_linux.tar.xz -C .
mkdir -p /opt/PE-bear
mv PE-bear_0.5.3.2_x64_linux/* /opt/PE-bear/.
rm -r "${tmpdir}"
cd /opt/PE-bear/
wget https://raw.githubusercontent.com/hasherezade/pe-bear-releases/master/logo/main_ico.png

cat > /usr/share/applications/pebear.desktop <<EOF
[Desktop Entry]
Name=PE-bear
Exec=/opt/PE-bear/PE-bear
Terminal=false
Type=Application
Icon=/opt/PE-bear/main_ico.png
Categories=Security;Development;
EOF

# DidierStevensSuite
apt -y install python-is-python3
cd /opt/
git clone https://github.com/DidierStevens/DidierStevensSuite
cd DidierStevensSuite
chmod +x decode-vbe.py decompress_rtf.py emldump.py msoffcrypto-crack.py oledump.py pdf-parser.py pdfid.py pdftool.py rtfdump.py xmldump.py xorsearch.py zipdump.py 
echo "export PATH=\$PATH:/opt/DidierStevensSuite/" > /etc/profile.d/DidierStevensSuite.sh

# ViperMonkey
apt -y install docker.io
mkdir -p /opt/ViperMonkey
cd /opt/ViperMonkey
wget https://raw.githubusercontent.com/decalage2/ViperMonkey/master/docker/dockermonkey.sh
chmod +x dockermonkey.sh
echo "export PATH=\$PATH:/opt/ViperMonkey/" > /etc/profile.d/ViperMonkey.sh
#systemctl stop docker containerd
#systemctl disable docker containerd

# eclipse
snap install --classic eclipse
apt -y install apt install default-jre
cp /snap/eclipse/48/meta/gui/eclipse.desktop /usr/share/applications/eclipse.desktop

# TODO: php eclipse environment

# jd-gui
tmpdir=$(mktemp -d)
cd "${tmpdir}"
wget https://github.com/java-decompiler/jd-gui/releases/download/v1.6.6/jd-gui-1.6.6.deb
dpkg -i jd-gui-1.6.6.deb
rm -r "${tmpdir}"

# apktool
apt install apktool

# dex2jar
tmpdir=$(mktemp -d)
cd "${tmpdir}"
wget https://github.com/pxb1988/dex2jar/releases/download/2.0/dex-tools-2.0.zip
mkdir -p /opt/
unzip dex-tools-2.0.zip
mv dex2jar-2.0 /opt/dex2jar
rm -r "${tmpdir}"
cd /opt/dex2jar
chmod +x *.sh

# cyberchef
tmpdir=$(mktemp -d)
cd "${tmpdir}"
wget https://gchq.github.io/CyberChef/CyberChef_v9.27.6.zip
unzip CyberChef_v9.27.6.zip -d /opt/CyberChef
rm -r "${tmpdir}"
cd /opt/CyberChef
mv CyberChef_*.html CyberChef.html
cat > /usr/share/applications/cyberchef.desktop <<EOF
[Desktop Entry]
Name=CyberChef
Exec=firefox /opt/CyberChef/CyberChef.html
Terminal=false
Type=Application
Icon=/opt/CyberChef/images/cyberchef-128x128.png
Categories=Security;Development;
EOF

# wscript
apt -y install git
tmpdir=$(mktemp -d)
cd "${tmpdir}"
git clone https://github.com/mrpapercut/wscript
rm wscript/dist/*.rar
mv wscript/dist/* /opt/wscript/.
mkdir -p /opt/wscript
rm -r "${tmpdir}"
cat > /usr/share/applications/wscript.desktop <<EOF
[Desktop Entry]
Name=WScript
Exec=firefox /opt/wscript/index.html
Terminal=false
Type=Application
Categories=Security;Development;
EOF



