#!/bin/bash
echo Needs sudo
sudo echo thx
sudo apt install git wget tar unzip unrar p7zip

# download some windows tools
TOOLSDIR="mal-win-tools"
mkdir -p ${TOOLSDIR}
cd ${TOOLSDIR}

# sysinternals
mkdir -p sysinternals
cd sysinternals
wget https://download.sysinternals.com/files/SysinternalsSuite.zip
unzip SysinternalsSuite.zip
cd ..

# DriverMon
mkdir -p DriverMon
cd DriverMon
wget https://github.com/zodiacon/DriverMon/releases/download/0.31beta/DriverMon.zip
unzip DriverMon.zip
cd ..

# windbg
mkdir -p windbg
cd windbg

mkdir -p winxp
cd winxp
wget https://codemachine.com/downloads/winxp/dbg_x86_6.0.17.0.msi
cd ..
mkdir -p win7
cd win7
wget https://codemachine.com/downloads/win71/dbg_amd64_6.12.2.633.msi
wget https://codemachine.com/downloads/win71/dbg_x86_6.12.2.633.msi
cd ..
mkdir -p win10
cd win10
wget https://codemachine.com/downloads/win10/X64%20Debuggers%20And%20Tools-x64_en-us.msi
wget https://codemachine.com/downloads/win10/X86%20Debuggers%20And%20Tools-x86_en-us.msi 
cd ..
mkdir -p win10th2
cd win10th2
wget https://codemachine.com/downloads/win10th2/X64%20Debuggers%20And%20Tools-x64_en-us.msi
wget https://codemachine.com/downloads/win10th2/X86%20Debuggers%20And%20Tools-x86_en-us.msi
cd ..
mkdir -p win10th3
cd win10th3
wget https://codemachine.com/downloads/win10rs1/X64%20Debuggers%20And%20Tools-x64_en-us.msi
wget https://codemachine.com/downloads/win10rs1/X86%20Debuggers%20And%20Tools-x86_en-us.msi
cd ..

## windbg/wdgbgark
mkdir -p wdgbgark
cd wdgbgark 
wget https://github.com/swwwolf/wdbgark/releases/download/alpha/wdbgark-dev.zip
unzip wdbgark-dev.zip
cd ..

## windbg/SwishDbgExt
mkdir -p SwishDbgExt
cd SwishDbgExt
wget https://github.com/comaeio/SwishDbgExt/releases/download/v3.0.20180330.1/SwishDbgExt-3.0.20180330.1.zip
unzip SwishDbgExt-3.0.20180330.1.zip
cd ..

## windbg/DbgKit
mkdir -p DbgKit
cd DbgKit
wget http://www.andreybazhan.com/download/DbgKit.zip
unzip DbgKit.zip
cd ..

cd ..

# shellcode launcher
mkdir -p shellcode_launcher
cd shellcode_launcher
wget https://github.com/clinicallyinane/shellcode_launcher/raw/master/shellcode_launcher.exe
cd ..

# osr driver loader
mkdir -p osrloader
cd osrloader
wget "http://www.osronline.com/OsrDown.cfm/osrloaderv30.zip?name=osrloaderv30.zip&id=157" -O osrloaderv30.zip
unzip osrloaderv30.zip
cd ..


# tools from hasherezade
mkdir -p hasherezade
cd hasherezade

## hasherezade/pe-sieve
mkdir -p pe-sieve
cd pe-sieve
wget https://github.com/hasherezade/pe-sieve/releases/download/v0.2.9/pe-sieve32.exe
wget https://github.com/hasherezade/pe-sieve/releases/download/v0.2.9/pe-sieve64.exe
cd ..

## hasherezade/hollows-hunter
mkdir -p hollows-hunter
cd hollows-hunter
wget https://github.com/hasherezade/hollows_hunter/releases/download/v0.2.9/hollows_hunter32.exe
wget https://github.com/hasherezade/hollows_hunter/releases/download/v0.2.9/hollows_hunter64.exe
cd ..

## hasherezade/IAT_Patcher
mkdir -p IAT_Patcher
cd IAT_Patcher
wget https://github.com/hasherezade/IAT_patcher/releases/download/v0.3.5.3/IAT_Patcher_x86.zip
unzip IAT_Patcher_x64.zip -d IAT_Patcher_x64
wget https://github.com/hasherezade/IAT_patcher/releases/download/v0.3.5.3/IAT_Patcher_x64.zip
unzip IAT_Patcher_x86.zip -d IAT_Patcher_x86
wget https://github.com/hasherezade/IAT_patcher/files/1485930/vc_redist.x64.zip
unzip vc_redist.x64.zip
wget https://github.com/hasherezade/IAT_patcher/files/1485931/vc_redist.x86.zip
unzip vc_redist.x86.zip
cd ..

## hasherezade/mal_unpack
mkdir -p mal_unpack
cd mal_unpack
wget https://goo.gl/ShvVWu -O mal_unpack32.zip
unzip mal_unpack32.zip -d mal_unpack32
wget https://goo.gl/92fx4P -O mal_unpack64.zip
unzip mal_unpack64.zip -d mal_unpack64
cd ..

## hasherezade/PE-bear
mkdir -p PE-bear
cd PE-bear
wget https://github.com/hasherezade/pe-bear-releases/releases/download/0.5.3.2/PE-bear_0.5.3.2_x64_win_vs13.zip
unzip PE-bear_0.5.3.2_x64_win_vs13.zip -d PE-bear_0.5.3.2_x64_win_vs13
wget https://github.com/hasherezade/pe-bear-releases/releases/download/0.5.3.2/PE-bear_0.5.3.2_x86_win_vs13.zip
unzip PE-bear_0.5.3.2_x86_win_vs13.zip -d PE-bear_0.5.3.2_x86_win_vs13
cd ..

cd ..


# HxD
mkdir -p HxD
cd HxD
wget https://mh-nexus.de/downloads/HxDSetup.zip
unzip HxDSetup.zip
cd ..

# x64dgb
mkdir -p x64dbg
cd x64dbg

wget https://github.com/x64dbg/x64dbg/releases/download/snapshot/snapshot_2019-10-23_12-30.zip
unzip snapshot_2019-10-23_12-30.zip
## ScyllaHide
wget https://github.com/x64dbg/ScyllaHide/releases/download/snapshot/ScyllaHide_2019-03-11_20-38.7z
mkdir -p release/x32/plugins
mkdir -p release/x64/plugins
7z x ScyllaHide_2019-03-11_20-38.7z -o ScyllaHide
cp ScyllaHide/Release/{scylla_hide.ini,NtApiCollection.ini,HookLibraryx86.dll} ScyllaHide/Release/plugins/ScyllaHideX64DBGPlugin.dp32 release/x32/plugins/.
cp ScyllaHide/Release/{scylla_hide.ini,NtApiCollection.ini,HookLibraryx64.dll} ScyllaHide/Release/plugins/ScyllaHideX64DBGPlugin.dp64 release/x64/plugins/.
## OllyDumpEx
wget https://low-priority.appspot.com/ollydumpex/OllyDumpEx.zip
unzip OllyDumpEx.zip
cp OllyDumpEx_v*/OllyDumpEx_X64Dbg.dp32 release/x32/plugins/.
cp OllyDumpEx_v*/OllyDumpEx_X64Dbg.dp64 release/x64/plugins/.
## YaraGen
wget https://github.com/mrexodia/YaraGen/releases/download/v0.1/YaraGen.dp32
cp YaraGen.dp32 release/x32/plugins/.
wget https://github.com/mrexodia/YaraGen/releases/download/v0.1/YaraGen.dp64
cp YaraGen.dp64 release/x64/plugins/.
## Api-Break-for-x64dbg
wget https://github.com/0ffffffffh/Api-Break-for-x64dbg/releases/download/BETA/x64dbgApiBreak.dp32
cp x64dbgApiBreak.dp32 release/x32/plugins/.
wget https://github.com/0ffffffffh/Api-Break-for-x64dbg/releases/download/BETA/x64dbgApiBreak.dp64
cp x64dbgApiBreak.dp64 release/x64/plugins/.
## DbgChild
wget https://github.com/David-Reguera-Garcia-Dreg/DbgChild/releases/download/beta10/DbgChild.Beta.10.zip
unzip DbgChild.Beta.10.zip
cp -r DbgChild\ Beta\ 10/release/* release/.
## nfdx64dbg
wget https://github.com/horsicq/nfdx64dbg/releases/download/0.06/release.zip -O nfdx64dbg.zip
unzip nfdx64dbg.zip -d nfdx64dbg
cp -r nfdx64dbg/release/* release/.
cd ..

if false; then
# ghidra
mkdir -p ghidra
cd ghidra
wget wget https://github.com/NationalSecurityAgency/ghidra/archive/Ghidra_9.0.2_build.zip
unzip Ghidra_9.0.2_build.zip
wget https://download.java.net/java/GA/jdk11/9/GPL/openjdk-11.0.2_windows-x64_bin.zip
unzip openjdk-11.0.2_windows-x64_bin.zip
mkdir -p pdb
cd pdb
wget https://go.microsoft.com/fwlink/?LinkId=746572 -o VC_redist64.exe
git clone https://github.com/MalwareTech/MSDIA-x64
cd ..
cd ..
fi

# pafish
mkdir -p pafish
cd pafish
wget https://github.com/a0rtega/pafish/raw/master/pafish.exe
cd ..

# processhacker
mkdir -p processhacker
cd processhacker
wget https://github.com/processhacker/processhacker/releases/download/v2.39/processhacker-2.39-bin.zip
unzip processhacker-2.39-bin.zip
cd ..

# dnSpy
mkdir -p dnSpy
cd dnSpy
wget https://github.com/0xd4d/dnSpy/releases/download/v6.0.5/dnSpy-netcore-win64.zip
unzip dnSpy-netcore-win64.zip -d dnSpy-netcore-win64
wget https://github.com/0xd4d/dnSpy/releases/download/v6.0.5/dnSpy-netcore-win32.zip
unzip dnSpy-netcore-win32.zip -d dnSpy-netcore-win32
wget https://aka.ms/vs/16/release/vc_redist.x86.exe
wget https://aka.ms/vs/16/release/vc_redist.x64.exe
wget https://github.com/0xd4d/dnSpy/releases/download/v6.0.5/dnSpy-net472.zip
unzip dnSpy-net472.zip -d dnSpy-net472
cd ..

# upx
mkdir -p upx
cd upx
wget https://github.com/upx/upx/releases/download/v3.96/upx-3.96-win32.zip
unzip upx-3.96-win32.zip
wget https://github.com/upx/upx/releases/download/v3.96/upx-3.96-win64.zip
unzip upx-3.96-win64.zip
cd ..



cd ..


